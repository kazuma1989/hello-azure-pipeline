trigger: none
pr: none
schedules:
  - cron: "0 0 * * *"
    displayName: Daily midnight release
    branches:
      include:
        - master

stages:
  - stage: Release
    jobs:
      - deployment: Release
        pool:
          vmImage: ubuntu-latest
        environment: staging
        strategy:
          runOnce:
            deploy:
              steps:
                - task: DownloadPipelineArtifact@2
                  inputs:
                    buildType: specific
                    project: "$(System.TeamProjectId)"
                    # curl 'https://dev.azure.com/kazuma1989/hello-azure-pipeline/_apis/build/definitions?name=Push+trigger&api-version=5.0' | jq '.value[0].id'
                    pipelineId: 8
                    buildVersionToDownload: latest

                - bash: |
                    set -x

                    whoami
                    pwd
                    ls -lA ./
                    ls -lA ./*
                  workingDirectory: $(Pipeline.Workspace)
                  displayName: Debugging
